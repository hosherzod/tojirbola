<!-- webapp/index.html -->

<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mahsulotlar</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: Arial; padding: 16px; }
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
        .card { background: white; border-radius: 12px; padding: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center; }
        .card img { width: 100%; height: 120px; object-fit: cover; border-radius: 8px; }
        .price { font-weight: bold; color: #e53935; }
        .btn { background: #4CAF50; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; width: 100%; }
    </style>
</head>
<body>
    <h2>Mahsulotlar</h2>
    <div class="grid" id="products-grid"></div>
    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        const products = JSON.parse(tg.initDataUnsafe.products || '[]');
        const grid = document.getElementById('products-grid');
        products.forEach(p => {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <img src="https://via.placeholder.com/150" alt="${p.name}">
                <h3>${p.name}</h3>
                <div class="price">${p.price.toLocaleString()} soâ€˜m</div>
                <button class="btn" onclick="tg.sendData(JSON.stringify({action:'order',id:${p.id}})); tg.close();">ðŸ›’ Buyurtma</button>
            `;
            grid.appendChild(card);
        });
    </script>
</body>
</html>
